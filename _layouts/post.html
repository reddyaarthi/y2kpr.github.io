---
layout: default
---
<div id="post">
{{ content }}
</div>

<div id="comments">
  <h2>Comments</h2>
  name: <input type="text" id="name"> <br>
  comment: <input type="text" id="comment">
  <button type="button" id="submitComment" onclick="submitCommentClicked()">Submit</button>
</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    {% for post in site.related_posts limit:3 %}
      <li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ post.url }}">{{ post.title }}</a></li>
    {% endfor %}
  </ul>
</div>

<script type="text/javascript">
  function submitCommentClicked() {
    var url = "https://hebslqfvud.execute-api.us-east-1.amazonaws.com/prod/BlogPushComment";
    var name = document.getElementById("name").value;
    var comment = document.getElementById("comment").value;
    if (name = '' || comment == '') {
      // pop an error message
      return;
    }
    var requestBody = '{ "name": "' + name + '", "comment": "' + comment + '" }';
    console.log(requestBody);
    // Send a http request to API Gateway
    var request = new XMLHttpRequest();
    request.onreadystatechange = function() {
        if (request.readyState == 4 && request.status == 200)
            callback(request.responseText);
    }
    request.open("POST", url, true);
    request.send(requestBody);

    // Clean up the comment fields
    document.getElementById("name").value = "";
    document.getElementById("comment").value = "";
  };
</script>
